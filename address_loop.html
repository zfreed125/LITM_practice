<!DOCTYPE html>
<html>
    <head>
        <title>Real Table</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="helpers.js"></script>
    </head>
    <body style="background-color: yellow;">
        
        <!-- <div class="container"> -->
            <form style="padding: 3em; margin: 5em;" class="form-group" action="" method="POST">
              <div style="text-align: center; background-color: green;"><button class="submit">Submit</button></div>  
            <div style="text-align: center; background-color:violet;" id="clonedInput1" class="clonedInput form-control">
                        <div>
                            <span class="requiredField">*</span>
                            <input type="text" name="street1" placeholder="Street1">
                        </div>
    
                        <div>
                            <span class="requiredField">*</span>
                            <input type="text" name="street2" placeholder="Street2">
                        </div>
                        
                        <div>
                            <span class="requiredField">*</span>
                            <input type="text" name="city" placeholder="City">
                        </div>
                        
                        <div>
                            <span class="requiredField">*</span>
                            <select name="shortState" id="shortState"> </select>
                        </div>
                        
                        <div>
                            <span class="requiredField">*</span>
                            <input type="text" name="zip1" placeholder="Zip1">
                        </div>
            
                        <div>
                             <span class="requiredField">*</span>
                            <input type="text" name="zip2" placeholder="Zip2">
                        </div>
            
                        <div>
                             <span class="requiredField">*</span>
                            <input type="text" name="country" placeholder="Country">
                        </div>
            
                        <div style="background-color: red;" class="actions">
                            <button class="clone">Add</button> 
                            <button class="remove">Delete</button>
                        </div>
                </div>
        </form>
    <!-- </div> -->
    <script>
          window.addEventListener('load', (event) => {
                    $(function() {
                    var output = [];
                    var shortState = '';
                    $.each(state , function(i, state){
                    let j = "";
                    if (state.abrev === shortState){
                        j = 'selected';
                    }  
                    output.push(`<option value="${state.abrev}"${j}>${state.state}</option>`);
                    });
                    $('#shortState').html(output.join(''));
                }); 
                });

        var regex = /^(.+?)(\d+)$/i;
var cloneIndex = $(".clonedInput").length;

function clone(){
    $(this).parents(".clonedInput").clone()
        .appendTo("body")
        .attr("id", "clonedInput" +  cloneIndex)
        .find("*")
        .each(function() {
            console.log($(this).val(""));
            var id = this.id || "";
            var match = id.match(regex) || [];
            if (match.length == 3) {
                this.id = match[1] + (cloneIndex);
            }
        })
        .on('click', 'button.clone', clone)
        .on('click', 'button.remove', remove);
    cloneIndex++;
}
function remove(){
    $(this).parents(".clonedInput").remove();
}
$("button.clone").on("click", clone);

$("button.remove").on("click", remove);
    </script>    
    </body>
</html>